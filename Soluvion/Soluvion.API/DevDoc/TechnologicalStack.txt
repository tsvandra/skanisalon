================================================================================
TECHNIKAI STACK DOKUMENTÁCIÓ: SOLUVION (SKANI SALON)
================================================================================
Dátum:    2026.02.06.
Verzió:   1.2 (Technical Deep Dive)
Típus:    Rendszerarchitektúra és Biztonság

[ 1. BACKEND ECOSYSTEM (.NET CORE) ]

A rendszer magja a Microsoft .NET 10 keretrendszerre épül, amely a nagyvállalati 
stabilitást ötvözi a modern felhő-technológiákkal.

- Keretrendszer:  .NET 10 (ASP.NET Core Web API)
- Nyelv:          C# 14
- Architekturális Minta: MVC (Model-View-Controller) - API Controllers
- Adatelérés (ORM): Entity Framework Core (Code-First megközelítés)

Kulcsfontosságú NuGet Csomagok:
  > Npgsql.EntityFrameworkCore.PostgreSQL: A Postgres adatbázis meghajtója.
  > BCrypt.Net-Next: Kriptográfiai jelszókezelés (lásd a Biztonság részt).
  > System.IdentityModel.Tokens.Jwt: JWT generálás és validálás.
  > Swashbuckle.AspNetCore: Swagger/OpenAPI dokumentáció generálás.

Dependency Injection (DI):
  A rendszer a beépített .NET DI konténert használja a szolgáltatások 
  (pl. DbContext, Services) injektálására, biztosítva a modularitást és 
  tesztelhetőséget.

--------------------------------------------------------------------------------

[ 2. ADATBÁZIS RÉTEG ]

A rendszer relációs adatbázist használ, amely a Railway felhőjében fut.

- Motor:          PostgreSQL 16+
- Hosting:        Railway (Dockerizált környezet)
- Kapcsolat:      Connection String (Környezeti változóból injektálva)
- Migrációk:      EF Core Migrations (dotnet ef migrations add/update)

Adatmodell Struktúra (Részlet):
  - Companies:    A bérlők (szalonok) adatai. (PK: Id)
  - Users:        Adminisztrátorok/Felhasználók. (FK: CompanyId)
  - Services:     Szolgáltatások árlistája. (FK: CompanyId)
  - Galleries:    Feltöltött képek metaadatai. (FK: CompanyId)

--------------------------------------------------------------------------------

[ 3. BIZTONSÁG ÉS AUTENTIKÁCIÓ (Security Stack) ]

Ez a rendszer egyik legkritikusabb pontja. Nem tárolunk jelszavakat nyílt szövegként.

A. Jelszó Hashing (A hiányzó láncszem):
   A jelszavak tárolására a **BCrypt** algoritmust használjuk.
   
   - Technológia: BCrypt (Blowfish cipher alapú).
   - Működés: 
     1. Regisztrációkor a rendszer generál egy véletlenszerű "Salt"-ot (sót).
     2. A jelszót összefűzi a sóval, és többszörösen hash-eli (Work Factor).
     3. Az adatbázisba csak a hash kerül mentésre.
   - Előny: Védelmet nyújt a Rainbow Table támadások és a Brute Force ellen 
     (mivel a hash generálása szándékosan lassú).

B. Autentikáció (Stateless):
   - Szabvány: JWT (JSON Web Token).
   - Típus: Bearer Token.
   - Aláírás: HMACSHA512 (Szimmetrikus kulcsú titkosítás).
   - Payload (Claims): A token tartalmazza a felhasználó adatait:
       > NameIdentifier (User ID)
       > Name (Felhasználónév)
       > CompanyId (Melyik céghez tartozik - Multi-tenancy kulcs!)
   
C. Hálózati Biztonság:
   - CORS (Cross-Origin Resource Sharing): Szigorúan szabályozott házirend.
     Csak a Netlify domain és a Localhost (fejlesztéshez) engedélyezett.
   - HTTPS: Kötelező titkosított csatorna (a Railway és Netlify automatikusan kezeli).

--------------------------------------------------------------------------------

[ 4. FRONTEND ECOSYSTEM (VUE.JS) ]

A kliens oldal egy modern SPA (Single Page Application).

- Keretrendszer:  Vue 3 (Composition API, <script setup> szintaxis)
- Build Tool:     Vite (Gyors HMR - Hot Module Replacement)
- Nyelv:          JavaScript (ESNext) / JSDoc típusokkal

UI & Design:
  - Komponens Könyvtár: PrimeVue (Button, Input, Dialog, TabView, Card).
  - CSS: Egyedi CSS + CSS Variables (Dinamikus színezéshez).
  - Ikonok: PrimeIcons.

Állapotkezelés (State Management):
  - Lokális State: `ref`, `reactive`.
  - Globális State: Vue `provide/inject` minta (pl. a Company adatok átadására).
  - Router: Vue Router (WebHistory módban).

API Kommunikáció:
  - Kliens: Axios.
  - Konfiguráció: BaseURL beállítása környezeti változókból.
  - Interceptors: (Tervben) A token automatikus csatolása minden kérés fejlécéhez.

--------------------------------------------------------------------------------

[ 5. INFRASTRUKTÚRA ÉS DEVOPS ]

A rendszer CI/CD (Continuous Integration / Deployment) alapokon működik.

Backend Pipeline (Railway):
  - Trigger: Git Push a main ágra.
  - Folyamat: Docker Image építése -> Konténer indítása -> Portok megnyitása.
  - Környezeti Változók: Adatbázis URL, JWT Secret Key (Titkosítva tárolva).

Frontend Pipeline (Netlify):
  - Trigger: Git Push.
  - Build Parancs: `npm run build`
  - Output: `/dist` mappa tartalmának publikálása CDN-re.
  - Routing Config: `netlify.toml` (SPA redirect szabályok).

Környezeti Változók (.env kezelés):
  - Fejlesztés (Local): .env fájlban (VITE_API_URL=https://skanisalon...).
  - Éles (Production): A szolgáltatók Dashboardján beállítva.

================================================================================